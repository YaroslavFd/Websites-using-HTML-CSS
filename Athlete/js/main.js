"use strict";function disableScroll(){var e=window.scrollY;document.body.classList.add("disable-scroll"),document.body.dataset.position=e,document.body.style.top=-e+"px"}function enableScroll(){var e=parseInt(document.body.dataset.position,10);document.body.style.top="auto",document.body.classList.remove("disable-scroll"),window.scroll({top:e,left:0}),document.body.removeAttribute("data-position")}var burger=document.querySelector(".burger"),menu=document.querySelector(".header__nav");burger.addEventListener("click",(function(){burger.classList.toggle("burger--active"),menu.classList.toggle("header__nav--active"),burger.classList.contains("burger--active")?disableScroll():enableScroll()})),$(".header__nav .nav__link").click((function(e){$(menu).removeClass("header__nav--active"),$(burger).removeClass("burger--active"),enableScroll()}));var cartBtn=document.querySelector(".cart__btn"),miniCart=document.querySelector(".mini-cart");cartBtn.addEventListener("click",(function(){miniCart.classList.add("mini-cart--visible")})),document.addEventListener("click",(function(e){e.target.classList.contains("mini-cart")||e.target.closest(".mini-cart")||e.target.classList.contains("cart__btn")||e.target.classList.contains("mini-product__delete")||miniCart.classList.remove("mini-cart--visible")}));var accordions=document.querySelectorAll(".faq-accordion");accordions.forEach((function(e){e.addEventListener("click",(function(e){var t=e.currentTarget,a=t.querySelector(".faq-accordion__control"),r=t.querySelector(".faq-accordion__content");t.classList.toggle("open"),t.classList.contains("open")?(a.setAttribute("aria-expanded",!0),r.setAttribute("aria-hidden",!1),r.style.maxHeight=r.scrollHeight+"px"):(a.setAttribute("aria-expanded",!1),r.setAttribute("aria-hidden",!0),r.style.maxHeight=null)}))})),$(".catalog__caption").click((function(e){$(this).next(".catalog__prop-inner").slideToggle(200)})),$(".catalog__caption").click((function(e){$(this).toggleClass("catalog__caption--active")})),$(".catalog__filter-btn").click((function(e){$(this).next(".catalog-filters").slideToggle(200)})),$(".catalog__item-btn--brand").click((function(e){$(".catalog__list--brand").toggleClass("catalog__list--brand-more"),$(".catalog__item--brand-hidden").toggleClass("catalog__item--brand-visible");var t=$(this),a=t.text(),r=t.data("label");t.text(r).data("label",a)})),$(".catalog__item-btn--category").click((function(e){$(".catalog__list--category").toggleClass("catalog__list--category-more"),$(".catalog__item--category-hidden").toggleClass("catalog__item--category-visible");var t=$(this),a=t.text(),r=t.data("label");t.text(r).data("label",a)}));var rangeSlider=document.getElementById("range-slider");if(rangeSlider){noUiSlider.create(rangeSlider,{start:[500,2e4],connect:!0,step:1,range:{min:[500],max:[2e4]}});var input0=document.getElementById("input-0"),input1=document.getElementById("input-1"),inputs=[input0,input1];rangeSlider.noUiSlider.on("update",(function(e,t){inputs[t].value=Math.round(e[t])}));var setRangeSlider=function(e,t){var a=[null,null];a[e]=t,rangeSlider.noUiSlider.set(a)};inputs.forEach((function(e,t){e.addEventListener("change",(function(e){setRangeSlider(t,e.currentTarget.value)}))}))}var popular=new Swiper(".popular-slider__container",{slidesPerView:4,spaceBetween:20,breakpoints:{320:{slidesPerView:1.2},450:{slidesPerView:1.5},576:{slidesPerView:1.7},650:{slidesPerView:2.2},768:{slidesPerView:2.7},1100:{slidesPerView:3.7}},loop:!0,autoplay:{delay:1500,disableOnInteraction:!1},speed:800}),reviews=new Swiper(".reviews__slider",{pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:3e3},speed:800}),styles=getComputedStyle(document.documentElement),colorValue=styles.getPropertyValue("--color-accent"),selector=document.querySelector('input[type="tel"]'),im=new Inputmask("+7 (999) 999-9999");im.mask(selector);var productsFormData=null,validateForms=function(e,t,a,r,n){new window.JustValidate(e,{rules:t,messages:a,colorWrong:colorValue,submitHandler:function(e){if(console.log(e),e.classList.contains("cart-modal__form")){productsFormData=new FormData(document.querySelector(".cart-modal__form")),document.querySelectorAll(".cart-modal-order__list .mini-cart__item").forEach((function(e,t){var a=e.querySelector(".mini-product__title").textContent,r=e.querySelector(".mini-product__price").textContent;productsFormData.append("product-".concat(t+1),"".concat(a,", ").concat(r))})),productsFormData.append("summ","".concat(document.querySelector(".cart-modal-order__summ span").textContent));var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&200===t.status&&console.log("Отправлено")},t.open("POST","mail.php",!0),t.send(productsFormData),e.reset()}else{var a=new FormData(e),r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&200===r.status&&console.log("Отправлено")},r.open("POST","mail.php",!0),r.send(a),e.reset()}}})};validateForms(".callback-form",{name:{required:!0},phone:{required:!0}},{name:{required:"Вы должны ввести имя"},phone:{required:"Вы должны ввести телефон"}},".thanks-popup"),validateForms(".cart-modal__form",{name:{required:!0},phone:{required:!0},email:{required:!0,email:!0}},{name:{required:"Вы должны ввести имя"},phone:{required:"Вы должны ввести телефон"},email:{required:"Вы должны ввести email",email:"Вы должны ввести корректный email"}},".thanks-popup");